<!DOCTYPE html>
<%- include('./partial/header.ejs', {title: 'User view'}) %>
<%- include('./partial/nav.ejs') %>
<main class="container">
    <h1>List of users</h1>

    <section class="update">
      <h3>Change user data</h3>
      <form action="./updateUser" method="post">
        <label class="add-label" for="id">
          Choose user <select class="input input-drop" name="id" id="id">
            <% Object.entries(allUsers).forEach(([key, value]) =>{ %>
            <option value="<%= value._id %>"><%= value.name %></option>
            <% }) %>
          </select>
        </label>
          <label class="add-label" for="name">name <input class="add-input" type="text" id="name" name="name"></label>
          <label class="add-label" for="age">age <input class="add-input" type="numer" id="age" name="age"></label>
          <label class="add-label" for="gender">gender <input class="add-input" type="text" id="gender" name="gender"></label>
        <button class="submit-user" type="submit">UPDATE</button>
      </form>
    </section>
    
    <h3>view all users</h3>
    <sub>total amount of users: <%= Object.keys(allUsers).length %> </sub>
    <% Object.entries(allUsers).forEach(([key, value]) => { %>
    <article class="userCard">
      <p>name: <%= value.name %> </p>
      <p>age: <%= value.age %> </p>
      <p>Is: <%= value.gender %> </p>
      <p>genres: <%= value.movieGenre %> </p>

      <form action="./deleteUser" method="post">
      <button class="submit-delete" name="id" value=<%= value._id %>>DELETE</button>
      </form>
    </article>
    <% }) %>
</main>
